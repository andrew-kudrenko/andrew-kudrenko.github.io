(this["webpackJsonpnews-aggregator-frontend"]=this["webpackJsonpnews-aggregator-frontend"]||[]).push([[0],{100:function(e,t,a){e.exports=a(120)},105:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(27),o=a.n(l),i=(a(105),a(106),a(18)),u=a(3),s=a(8),E=a(14),d=a.n(E),m=a(22),p="http://195.2.85.245",f=function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET-NEWS-LOADING",payload:!0}),t({type:"SET-NEWS-LOADING-ERROR",payload:null}),e.next=5,fetch("".concat(p,"/post"));case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,t({type:"FETCH-NEWS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"SET-NEWS-LOADING-ERROR",payload:e.t0.message});case 15:return e.prev=15,t({type:"SET-NEWS-LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},O=a(121),h=function(){return c.a.createElement(u.r,{icon:c.a.createElement(O.a,null)},"\u041f\u043e\u043a\u0430 \u0437\u0434\u0435\u0441\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442")},v=function(){return c.a.createElement(u.g,{mode:"error",header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445")},b=function(e){var t,a=Object(s.c)();return c.a.createElement(u.b,{size:"l",mode:"outline",style:{minWidth:"300px",maxWidth:"350px",margin:".5rem"}},c.a.createElement(u.c,null,c.a.createElement(u.A,{weight:"medium",level:"3"},new Date(e.added).toLocaleDateString()),e.photo&&c.a.createElement("img",{src:e.photo,width:"100%",alt:"news"}),c.a.createElement(u.h,{style:{marginBottom:".5rem"}},c.a.createElement(u.z,{weight:"regular"},e.text)),e.video&&c.a.createElement("video",null,c.a.createElement("source",{src:e.video})),c.a.createElement(u.a,{mode:"secondary",size:"xl",style:{marginTop:"auto"},onClick:a.bind(null,(t=e,function(){var e=Object(m.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"ADD-TO-FAVORITES",payload:t}),localStorage.setItem("favorites",JSON.stringify(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")))},y=Object(s.b)()((function(){var e=Object(s.d)((function(e){return e.news})),t=e.data,a=e.error,n=e.loading,l=Object(s.c)();return Object(r.useEffect)((function(){l(f())}),[]),c.a.createElement("div",{style:{margin:"0 auto",maxWidth:"1200px",display:"flex",justifyContent:"center",flexWrap:"wrap"}},a?c.a.createElement(v,null):n?c.a.createElement(u.w,{size:"large"}):t.length?t.map((function(e){return c.a.createElement(b,e)})):c.a.createElement(h,null))})),g=[{title:"\u041b\u0435\u043d\u0442\u0430",id:"feed"},{title:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b",id:"sources"},{title:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",id:"favorites"},{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",id:"profile"}],S=function(e){var t=e.activeTab,a=e.setActiveTab;return c.a.createElement(u.d,{vertical:"top"},c.a.createElement(u.u,{wide:!0}),c.a.createElement(u.x,null,c.a.createElement(u.j,null,g.map((function(e){return c.a.createElement(u.y,{selected:t===e.id,onClick:a.bind(null,e.id),key:e.id},e.title)})))))},T=function(e){return c.a.createElement(u.o,e,c.a.createElement(u.p,null,c.a.createElement(S,e)),c.a.createElement(u.c,{style:{margin:"0 auto",maxWidth:"1200px"}},e.children))},j=a(123),R=function(e){var t=e.title,a=e.city,n=e.date,r=e.region,l=e.source,o=e.category;return c.a.createElement(u.b,{size:"l",mode:"outline",style:{minWidth:"300px",maxWidth:"350px",margin:".5rem",zIndex:-1}},c.a.createElement(u.c,null,c.a.createElement(u.i,null,t),c.a.createElement(u.u,null),(r||a)&&c.a.createElement(u.h,null,r&&c.a.createElement(u.v,null,"\u0420\u0435\u0433\u0438\u043e\u043d: ",r.title),a&&c.a.createElement(u.v,null,"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442: ",a.title)),l&&c.a.createElement(u.v,null,"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a: ",l),n&&c.a.createElement(u.v,null,"\u0414\u0430\u0442\u0430: ",n.toLocaleDateString()),o&&c.a.createElement(u.v,null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: ",o.name),c.a.createElement(u.a,{mode:"secondary",size:"xl"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e")))},I=a(122),A=function(e){var t=e.modal,a=void 0===t?null:t,n=e.setModal,l=Object(s.c)(),o=Object(s.d)((function(e){return e.regions})).data,E=Object(s.d)((function(e){return e.cities})).data,d=Object(s.d)((function(e){return e.categories})).data,m=Object(r.useState)(""),p=Object(i.a)(m,2),f=p[0],O=p[1],h=Object(r.useState)(),v=Object(i.a)(h,2),b=v[0],y=v[1],g=Object(r.useState)(),S=Object(i.a)(g,2),T=S[0],j=S[1],R=Object(r.useState)("VK"),A=Object(i.a)(R,2),G=A[0],L=A[1],N=Object(r.useState)(new Date),w=Object(i.a)(N,1)[0],x=Object(r.useState)(),C=Object(i.a)(x,2),D=C[0],k=C[1],F=function(e){return function(t){return e(t.target.value)}},W=Boolean(f);return c.a.createElement(u.n,{activeModal:a},c.a.createElement(u.l,{id:"filters",header:c.a.createElement(u.m,{left:c.a.createElement(u.q,{onClick:n.bind(null,null)},c.a.createElement(I.a,null)),right:c.a.createElement(u.q,{onClick:function(){l({type:"CREATE-FILTER",payload:{title:f,category:D,city:T,date:w,region:b,source:G}}),n(null)},disabled:!W},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"),onClose:n.bind(null,null)},c.a.createElement(u.e,null,c.a.createElement(u.k,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043b\u0435\u043d\u0442\u044b",value:f,onChange:F(O)}),c.a.createElement(u.f,{top:"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f"},c.a.createElement(u.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043e\u043d",onChange:F(y)},o.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.title)}))),c.a.createElement(u.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",disabled:!b,onChange:F(j)},E.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.title)})))),c.a.createElement(u.t,{top:"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a",onChange:F(L)},c.a.createElement("option",{value:G},G)),c.a.createElement(u.f,{top:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"},c.a.createElement(u.k,{type:"date",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443"}),c.a.createElement(u.k,{type:"time",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f"})),c.a.createElement(u.t,{top:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",onChange:F(k)},d.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))))},G=function(){var e=Object(s.c)(),t=Object(r.useState)(null),a=Object(i.a)(t,2),n=a[0],l=a[1],o=Object(s.d)((function(e){return e.filters})),E=o.data,f=o.error,O=o.loading;return c.a.createElement(c.a.Fragment,null,c.a.createElement(A,{modal:n,setModal:l}),f?c.a.createElement(v,null):O?c.a.createElement(u.w,{size:"large"}):E.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"}},c.a.createElement(u.a,{size:"l",onClick:l.bind(null,"filters")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u0435\u043d\u0442\u0443")),c.a.createElement(u.s,{isFetching:O,onRefresh:e.bind(null,function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET-FILTERS-LOADING",payload:!0}),t({type:"SET-FILTERS-LOADING-ERROR",payload:null}),e.next=5,fetch("".concat(p,"/filters"));case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,t({type:"FETCH-FILTERS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"SET-FILTERS-LOADING-ERROR",payload:e.t0.message});case 15:return e.prev=15,t({type:"SET-FILTERS-LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())},c.a.createElement(u.h,null,E.map((function(e){return c.a.createElement(R,e)}))))):c.a.createElement(u.r,{icon:c.a.createElement(j.a,null),header:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0435\u043d\u0442\u044b",action:c.a.createElement(u.a,{size:"l",onClick:l.bind(null,"filters")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u0435\u043d\u0442\u0443")},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u043d\u0430\u0431\u043e\u0440 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u0438"))},L=a(19),N=a.n(L),w=a(124),x=Object(s.b)()((function(){var e=Object(s.d)((function(e){return e.favorites})).favorites;return c.a.createElement("div",{style:{margin:"0 auto",maxWidth:"1200px",display:"flex",justifyContent:"center",flexWrap:"wrap"}},e.length?e.map((function(e){return c.a.createElement(b,e)})):c.a.createElement(u.r,{icon:c.a.createElement(w.a,null)},"\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"))}));!function(e){e[e.Dark=0]="Dark",e[e.Light=1]="Light"}(n||(n={}));var C=function(){var e=Object(s.d)((function(e){return e.theme})).theme,t=Object(s.c)(),a="bright_light";e===n.Dark&&(a="space_gray");return{theme:e,setTheme:function(){document.body.setAttribute("scheme",a)},toggleTheme:function(){var a=e===n.Light?n.Dark:n.Light;t({type:"APP/SET-THEME",payload:a})}}},D=function(){var e=C().toggleTheme;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{onClick:e},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443"))},k=function(){var e=Object(r.useState)("feed"),t=Object(i.a)(e,2),a=t[0],n=t[1],l=C().setTheme,o=Object(s.c)(),E=null;switch(a){case"feed":E=c.a.createElement(y,null);break;case"sources":E=c.a.createElement(G,null);break;case"favorites":E=c.a.createElement(x,null);break;case"profile":E=c.a.createElement(D,null)}return Object(r.useEffect)((function(){N.a.send("VKWebAppInit").then((function(){return N.a.send("VKWebAppGetPersonalCard")})).catch(console.log)})),Object(r.useEffect)((function(){o(function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET-CATEGORIES-LOADING",payload:!0}),t({type:"SET-CATEGORIES-LOADING-ERROR",payload:null}),e.next=5,fetch("".concat(p,"/categories"));case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,t({type:"FETCH-CATEGORIES",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"SET-CATEGORIES-LOADING-ERROR",payload:e.t0.message});case 15:return e.prev=15,t({type:"SET-CATEGORIES-LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(r.useEffect)((function(){o(function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET-REGIONS-LOADING",payload:!0}),t({type:"SET-REGIONS-LOADING-ERROR",payload:null}),e.next=5,fetch("".concat(p,"/region"));case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,t({type:"FETCH-REGIONS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"SET-REGIONS-LOADING-ERROR",payload:e.t0.message});case 15:return e.prev=15,t({type:"SET-REGIONS-LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(r.useEffect)((function(){o(f())}),[o]),Object(r.useEffect)(l),c.a.createElement(u.B,{activePanel:"main"},c.a.createElement(T,{id:"main",activeTab:a,setActiveTab:n},E))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(20),W=a(48),H=a(49),z=a(6),M={data:[],error:null,loading:!1},V={data:[],error:null,loading:!1},B=a(26),P={favorites:[]},J={data:[],error:null,loading:!1},K={data:[],error:null,loading:!1},q={data:[],error:null,loading:!1},_={theme:n.Light},$=Object(F.combineReducers)({categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH-CATEGORIES":return Object(z.a)({},e,{data:n});case"SET-CATEGORIES-LOADING":return Object(z.a)({},e,{loading:n});case"SET-CATEGORIES-LOADING-ERROR":return Object(z.a)({},e,{error:n});default:return e}},regions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH-REGIONS":return Object(z.a)({},e,{data:n});case"SET-REGIONS-LOADING":return Object(z.a)({},e,{loading:n});case"SET-REGIONS-LOADING-ERROR":return Object(z.a)({},e,{error:n});default:return e}},cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH-CITIES":return Object(z.a)({},e,{data:n});case"SET-CITIES-LOADING":return Object(z.a)({},e,{loading:n});case"SET-CITIES-LOADING-ERROR":return Object(z.a)({},e,{error:n});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH-NEWS":return Object(z.a)({},e,{data:n});case"SET-NEWS-LOADING":return Object(z.a)({},e,{loading:n});case"SET-NEWS-LOADING-ERROR":return Object(z.a)({},e,{error:n});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"CREATE-FILTER":return Object(z.a)({},e,{data:[].concat(Object(B.a)(e.data),[n])});case"FETCH-FILTERS":return Object(z.a)({},e,{data:n});case"SET-FILTERS-LOADING":return Object(z.a)({},e,{loading:n});case"SET-FILTERS-LOADING-ERROR":return Object(z.a)({},e,{error:n});default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"APP/SET-THEME":return Object(z.a)({},e,{theme:n});default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD-TO-FAVORITES":return Object(z.a)({},e,{favorites:[].concat(Object(B.a)(e.favorites),[n])});case"REMOVE-FROM-FAVORITES":return Object(z.a)({},e,{favorites:Object(B.a)(e.favorites.filter((function(e){return e.id!==n.id})))});default:return e}}}),Q=Object(F.createStore)($,Object(H.composeWithDevTools)(Object(F.applyMiddleware)(W.a)));o.a.render(c.a.createElement(s.a,{store:Q},c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.a302e9d2.chunk.js.map